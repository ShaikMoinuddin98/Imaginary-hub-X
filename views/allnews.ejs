<!DOCTYPE html>

<html>

<head>
   <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>All News-Imaginary Hub X</title>
    <link href="/assests/css/mainstyle.css" rel="stylesheet" type="text/css" />
</head>
<style>
    /* Popup Overlay */
    .popup-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        display: none;
        /* Hidden by default */
        justify-content: center;
        align-items: center;
        z-index: 9999;
    }

    /* Popup Content */
    .popup-content {
        background-color: #fff;
        padding: 20px;
        border-radius: 8px;
        max-width: 500px;
        width: 100%;
        text-align: center;
        box-shadow: 0px 5px 15px rgba(0, 0, 0, 0.3);
        transform: translateY(0);
        /* Make sure it's in the middle vertically */
        z-index: 10000;
    }

    .popup-content h3 {
        font-size: 24px;
        margin-bottom: 20px;
    }

    .category-checkboxes {
        margin-bottom: 20px;
    }

    .subscribe-category-checkbox {
        display: flex;
        align-items: center;
        margin-bottom: 10px;
    }

    .subscribe-category-checkbox input[type="checkbox"] {
        margin-right: 10px;
    }

    .popup-buttons {
        display: flex;
        justify-content: space-around;
        margin-top: 20px;
    }

    .popup-buttons button {
        padding: 10px 20px;
        border: none;
        background-color: #007BFF;
        color: #fff;
        border-radius: 5px;
        cursor: pointer;
        transition: background-color 0.3s;
    }

    .popup-buttons button:hover {
        background-color: #0056b3;
    }

    /* Success Message */
    #thanksMessage {
        color: green;
        font-size: 18px;
        font-weight: bold;
        margin-top: 20px;
    }

    /* Close Button */
    #closePopupButton {
        background-color: #28a745;
    }

    #closePopupButton:hover {
        background-color: #218838;
    }

    /* Center the popup exactly in the middle */
    .popup-content {
        position: relative;
        margin: 0 auto;
        /* Center horizontally */
        display: flex;
        flex-direction: column;
        justify-content: center;
    }

    /* Form Success/Error Message Styling */
    .success-message,
    .error-message {
        display: none;
    }
</style>

<body>
    <div style="opacity:0" class="page-wrapper">
        <div data-collapse="medium" data-animation="over-left" data-duration="400"
            data-w-id="58db7844-5919-d71b-dd74-2323ed8dffe9" data-easing="ease" data-easing2="ease" role="banner"
            class="header w-nav">
            <div class="container-default w-container">
                <div class="header-wrapper">
                    <div class="split-content header-right"><a href="/" aria-current="page"
                            class="brand w-nav-brand w--current">
                            <h3 style="margin: 10px;"> Imaginary Hub X</h3>
                        </a>
                        <div class="header-divider"></div>
                        <nav role="navigation" class="nav-menu w-nav-menu">
                            <ul role="list" class="header-navigation">
                                <li class="nav-item-wrapper"><a href="/" aria-current="page"
                                        class="nav-link w--current">Home</a></li>
                                <li class="nav-item-wrapper"><a href="/about" class="nav-link">About</a></li>
                                <li class="nav-item-wrapper"><a href="/allnews" class="nav-link">Past
                                        issues</a>
                                </li>
                                <li class="nav-item-wrapper">
                                    <div data-hover="true" data-delay="0"
                                        data-w-id="043ef42a-34a9-1a0f-55ac-1fd10d021335"
                                        class="nav-link-dropdown w-dropdown">
                                        <div class="nav-link dropdown w-dropdown-toggle">
                                            <div>Our Topics <span class="dropdown-arrow"></span></div>
                                        </div>
                                        <nav class="dropdown-list w-dropdown-list">
                                            <div class="dropdown-nav-main-wrapper">
                                                <div class="dropdown-nav-pages-wrapper">
                                                    <div class="title dropdown-nav-title">Topics
                                                    </div>
                                                    <div class="dropdown-nav-content">
                                                        <ul role="list" class="dropdown-nav">
                                                            <li class="dropdown-nav-item"><a href="/allnews"
                                                                    aria-current="page"
                                                                    class="dropdown-nav-link w--current">Tech</a></li>
                                                            <li class="dropdown-nav-item"><a href="/allnews"
                                                                    class="dropdown-nav-link">Fianace</a></li>
                                                            <li class="dropdown-nav-item"><a href="/allnews"
                                                                    class="dropdown-nav-link">Bussiness News</a></li>
                                                        </ul>
                                                        <ul role="list" class="dropdown-nav last">
                                                            <li class="dropdown-nav-item"><a href="/allnews"
                                                                    class="dropdown-nav-link">Education</a></li>
                                                            <li class="dropdown-nav-item"><a href="/allnews"
                                                                    class="dropdown-nav-link tag w-inline-block">
                                                                    <div>Human Pscyology</div>
                                                                    <div class="dropdown-nav-link-tag">Exclusive</div>
                                                                </a></li>
                                                            <li class="dropdown-nav-item"><a href="/allnews"
                                                                    class="dropdown-nav-link tag w-inline-block">
                                                                    <div>Desgin & art</div>
                                                                    <div class="dropdown-nav-link-tag">Exclusive</div>
                                                                </a></li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <div class="dropdown-nav-pages-wrapper last">

                                                </div>
                                            </div>
                                        </nav>
                                    </div>
                                </li>
                                <li class="nav-item-wrapper button-mobile"><a href="/subscribe"
                                        class="button-primary header-button mobile w-inline-block">
                                        <div class="newsletter-button-icon"></div>
                                        <div>Subscribe</div>
                                    </a></li>
                            </ul>
                        </nav>
                        <div><a href="/allnews" class="cart-button w-inline-block" role="button">
                                <div class="w-inline-block">Latest Issue</div>

                            </a>

                        </div>
                    </div>
                    <div class="split-content header-left"><a data-w-id="03c57ad5-5287-7bc0-b112-b394ba6fbcd1"
                            href="/writer" class="link-underline-wrapper header-link w-inline-block">
                            <div>Become a Writer</div>
                            <div class="underline-wrapper header-link">
                                <div class="underline"></div>
                            </div>
                        </a><a href="/subscribe" class="button-primary header-button w-inline-block">
                            <div class="newsletter-button-icon header-button"></div>
                            <div>Subscribe</div>
                        </a>
                        <div class="menu-button w-nav-button">
                            <div class="header-menu-button-icon-wrapper">
                                <div class="icon-wrapper">
                                    <div class="header-menu-button-icon-top"></div>
                                    <div class="header-menu-button-icon-medium"></div>
                                    <div class="header-menu-button-icon-bottom"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="bg header-bg"></div>
        </div>

        <!-- Category Selection Popup -->
        <div id="categoryPopup" class="popup-overlay">
            <div class="popup-content">
                <h3>Select Your Interests</h3>
                <div class="category-checkboxes">
                    <div class="subscribe-category-checkbox">
                        <input type="checkbox" id="tech" name="category" value="Tech" />
                        <label for="tech">Tech</label>
                    </div>
                    <div class="subscribe-category-checkbox">
                        <input type="checkbox" id="finance" name="category" value="Finance" />
                        <label for="finance">Finance</label>
                    </div>
                    <div class="subscribe-category-checkbox">
                        <input type="checkbox" id="business" name="category" value="Business" />
                        <label for="business">Business</label>
                    </div>
                    <div class="subscribe-category-checkbox">
                        <input type="checkbox" id="education" name="category" value="Education" />
                        <label for="education">Education</label>
                    </div>
                    <div class="subscribe-category-checkbox">
                        <input type="checkbox" id="psychology" name="category" value="Human Psychology" />
                        <label for="psychology">Psychology</label>
                    </div>
                </div>

                <!-- Confirmation and Close Buttons -->
                <div class="popup-buttons">
                    <button onclick="confirmSubscription()">Confirm</button>
                    <button id="closePopupButton" onclick="closePopup()" style="display:none;">Close</button>
                </div>

                <div id="thanksMessage" style="display:none;">Thanks for subscribing to your selected categories!</div>
            </div>
        </div>
        </section>
        <section class="section newsletters">
            <div class="container-medium-696px newsletters">
                <h1 data-w-id="e056c6b9-38e5-c9b4-dadd-d09c5705bdfa"
                    style="-webkit-transform:translate3d(0, 50px, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);-moz-transform:translate3d(0, 50px, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);-ms-transform:translate3d(0, 50px, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);transform:translate3d(0, 50px, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);opacity:0"
                    class="title newsletters">All Newsletters</h1>
                <p data-w-id="8c2a4f3e-f390-af38-9cdb-c5530eb6fbfd"
                    style="-webkit-transform:translate3d(0, 50px, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);-moz-transform:translate3d(0, 50px, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);-ms-transform:translate3d(0, 50px, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);transform:translate3d(0, 50px, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);opacity:0"
                    class="paragraph newsletters">Explore insightful content on technology, finance, business,
                    education, and psychology. Stay informed with our curated topics, designed to keep you ahead.</span>
                </p>
                <!-- Search Bar -->
<div class="search-container">
    <input type="text" placeholder="Search by authour name" id="searchInput">
    <button onclick="performSearch()">Search</button>
</div>

<script>
    function performSearch() {
        const query = document.getElementById('searchInput').value;
        if (query) {
            fetch("/search-article",{
                method:"POST",
                headers:{
                    "Content-Type":"application/json"
                },
                body:JSON.stringify({name:query})
            })
            .then((res)=>res.json())
            .then((result)=>{
                let container=document.querySelector(".newsletter-item")
                let inhtml=""
                for(item of result.data){
            
                let title=item.title
                let id=item._id
                let username=query
                let publishdate=new Date(item.publishedDate).toLocaleDateString('en-US', {
                    year: 'numeric' , month: 'long' , day: 'numeric' })
               let itemhtml=`<a href="/article/${title}/${id}" class="card newsletter w-inline-block">
                                    <div class="card-newsletter-content-top">

                                        <div class="card-newsletter-issue-wrapper">
                                            <div>
                                                ${username}
                                            </div>
                                        </div>
                                        <div class="card-newsletter-content-top-divider"></div>
                                        <div>
                                           ${publishdate}
                                        </div>
                                    </div>
                                    <h2 class="title card-newsletter heading-size-h3">
                                      ${title}
                                    </h2>
                                </a>`
                    inhtml+=itemhtml
                    }
                if(inhtml!="")
                container.innerHTML=inhtml
                else
                container.innerHTML="<h2>Not Able to find any articles</h2>"
            })
        } else {
            alert("Please enter a search term.");
        }
    }
</script>

<style>
    /* Center search bar */
    .search-container {
        display: flex;
        align-items: center;
        justify-content: center;
        margin-top: 20px;
    }

    /* Style the search input */
    #searchInput {
        padding: 10px;
        width: 300px;
        border: 1px solid #ccc;
        border-radius: 5px 0 0 5px;
        outline: none;
    }

    /* Style the search button */
    .search-container button {
        padding: 10px;
        background-color: #007bff;
        color: white;
        border: none;
        border-radius: 0 5px 5px 0;
        cursor: pointer;
    }

    /* Button hover effect */
    .search-container button:hover {
        background-color: #0056b3;
    }
</style>

            </div>
            <div class="container-medium-812px">
                <div data-w-id="03531393-805f-ab71-2f1b-fcc6147c6d20"
                    style="-webkit-transform:translate3d(0, 50px, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);-moz-transform:translate3d(0, 50px, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);-ms-transform:translate3d(0, 50px, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);transform:translate3d(0, 50px, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);opacity:0"
                    class="w-dyn-list">
                    <div role="list" class="newsletters-grid w-dyn-items">
                        <div role="listitem" class="newsletter-item w-dyn-item">
                            <%for(item of data){%>
                                <a href="/article/<%=item.title%>/<%=item._id%>" class="card newsletter w-inline-block">
                                    <div class="card-newsletter-content-top">

                                        <div class="card-newsletter-issue-wrapper">
                                            <div>
                                                <%=item.username%>
                                            </div>
                                        </div>
                                        <div class="card-newsletter-content-top-divider"></div>
                                        <div>
                                            <%= new Date(item.publishedDate).toLocaleDateString('en-US', {
                                                year: 'numeric' , month: 'long' , day: 'numeric' })%>
                                        </div>
                                    </div>
                                    <h2 class="title card-newsletter heading-size-h3">
                                        <%=item.title%>
                                    </h2>
                                    <!-- <p class="paragraph card-newsletter"><%-item.article.split(" ").slice(0, 10).join(' ').replace(/<[^>]*>/g, '')%></p> -->
                                </a>
                                <%}%>
                        </div>

                    </div>
                    <br>
                    <a href="/subscribe" class="button-primary header-button w-inline-block">
                        <div class="newsletter-button-icon header-button"></div>
                        <div>Read More & Learn More!</div>
                    </a>
                    <div role="navigation" aria-label="List" class="w-pagination-wrapper pagination"></div>
                </div>
            </div>
        </section>
        <footer class="footer">
            <div class="container-default w-container">
                <div data-w-id="69754c41-08b9-6ecf-91b8-95942fc59e5b" class="footer-content-top">
                    <div class="split-content footer-content-top-main-content"><a href="/"
                            aria-current="page"
                            class="footer-logo-container w-inline-block w--current link-underline-wrapper">
                            <h3 class="footer-logo-container">Imaginary Hub X</h3>
                        </a>
                        <p class="paragraph footer-content-top-main-content-paragraph">Get the latest insights and
                            trends delivered straight to your inbox, covering tech, finance, business, education, and
                            psychology.</span>
                        </p>
                    </div>
                    <div class="newsletter-form-block footer-newsletter w-form">
                        <form id="newsletter-form" class="newsletter-form">
                            <input class="input newsletter w-input" maxlength="256" name="email"
                                placeholder="Enter your email address" type="email" required />
                            <!-- Subscribe Button -->
                            <div class="button-primary newsletter">
                                <div class="newsletter-button-icon"></div>
                                <!-- Triggering the Popup with the existing classes -->
                                <button type="button" class="newsletter-button-text w-button"
                                    onclick="openCategoryPopup()">Subscribe</button>
                            </div>
                        </form>
                        <div class="success-message w-form-done">
                            <div>Thanks for joining my newsletter.</div>
                        </div>
                        <div class="error-message w-form-fail">
                            <div>Oops! Something went wrong.</div>
                        </div>
                    </div>
                </div>
                <div class="divider footer-content-top-divider"></div>
                <div data-w-id="3f15247b-179c-b94a-4019-bc7e40900fba" class="footer-content">
                    <div class="footer-menu-main-content">
                        <div class="footer-menu-wrapper">
                            <div class="title footer-menu-title">Useful Links</div>
                            <div class="footer-menu-content">
                                <ul role="list" class="footer-nav w-list-unstyled">
                                    <li class="footer-nav-item"><a href="/" aria-current="page"
                                            class="footer-nav-link w--current">Home</a></li>
                                    <li class="footer-nav-item"><a href="/about"
                                            class="footer-nav-link">About</a></li>
                                    <li class="footer-nav-item"><a href="/contact"
                                            class="footer-nav-link">Contact</a>
                                    </li>
                                    <li class="footer-nav-item"><a href="/allnews"
                                            class="footer-nav-link tag w-inline-block">
                                            <div>Newsletters</div>
                                            <div class="footer-nav-link-tag">ALL</div>
                                        </a></li>
                                    <li class="footer-nav-item"><a href="/allnews"
                                            class="footer-nav-link tag w-inline-block">
                                            <div>Latest issues</div>
                                            <div class="footer-nav-link-tag">Single</div>
                                        </a></li>
                                </ul>
                                <ul role="list" class="footer-nav last w-list-unstyled">
                                    <li class="footer-nav-item"><a href="/subscribe"
                                            class="footer-nav-link">Subscribe</a></li>
                                    <li class="footer-nav-item"><a href="/privacy"
                                                class="footer-nav-link">Privacy-Policy</a></li>
                                    <li class="footer-nav-item"><a href="/terms-cond"
                                                    class="footer-nav-link">Terms & Conditions</a></li>
                                    <li class="footer-nav-item"><a href=""
                                            class="footer-nav-link tag w-inline-block">
                                            <div>Pricing Single</div>
                                            <div class="footer-nav-link-tag">eCommerce</div>
                                        </a></li>
                                </ul>
                            </div>
                        </div>
                        <div class="footer-menu-wrapper last">
                        </div>
                    </div>
                  
                </div>
                <div class="divider footer-content-bottom-divider"></div>
                <div data-w-id="4a24e60e-bea5-a418-e416-88b53fbdd0a6" class="footer-content-bottom">
                    <div class="footer-small-print">Copyright © Imaginary Hub X</div>
                </div>
        </footer>
        </a>
        <script>
            document.documentElement.setAttribute('data-wf-page', '60e8cf164fde5e1e9bb2d163');
            document.documentElement.setAttribute('data-wf-site', '60e78cd29a6063dc4dd03bcb');
            document.documentElement.setAttribute('data-wf-status', '1');
            document.documentElement.setAttribute('lang', 'en');</script>
        <script src="/assests/js/page.js" type="text/javascript"></script>
        <script src="/assests/js/main.js" type="text/javascript"></script>
        <script>
            // Get DOM elements
            const subscribeButtons = document.querySelectorAll('.button-primary.newsletter');
            const categoryPopup = document.getElementById('categoryPopup');
            const confirmButton = categoryPopup.querySelector('.popup-buttons').firstElementChild;
            const closeButton = categoryPopup.querySelector('.popup-buttons').lastElementChild;
            const thanksMessage = document.getElementById('thanksMessage');
            const categoryCheckboxes = document.querySelectorAll('.subscribe-category-checkbox');
            const successMessages = document.querySelectorAll('.success-message');
            const errorMessages = document.querySelectorAll('.error-message');

            let currentEmailInput = null;

            // Add click handlers to all subscribe buttons
            subscribeButtons.forEach(button => {
                button.addEventListener('click', function (e) {
                    e.preventDefault();
                    const emailInput = this.previousElementSibling;

                    if (!emailInput || !emailInput.value) {
                        showError('Please enter an email address');
                        return;
                    }

                    if (!isValidEmail(emailInput.value)) {
                        showError('Please enter a valid email address');
                        return;
                    }

                    currentEmailInput = emailInput;
                    showCategoryPopup();
                });
            });

            // Show/hide popup functions
            function showCategoryPopup() {
                categoryPopup.style.display = 'flex';
                // Reset checkboxes
                categoryCheckboxes.forEach(checkbox => checkbox.classList.remove('selected'));
            }

            function hideCategoryPopup() {
                categoryPopup.style.display = 'none';
                thanksMessage.style.display = 'none';
            }

            // Toggle category selection
            categoryCheckboxes.forEach(checkbox => {
                checkbox.addEventListener('click', function () {
                    this.classList.add('selected');
                });
            });

            // Handle form submission
            confirmButton.addEventListener('click', async function () {
                const selectedCategories = Array.from(categoryCheckboxes)
                    .filter(checkbox => checkbox.classList.contains('selected'))
                    .map(checkbox => checkbox.textContent.trim());

                if (selectedCategories.length === 0) {
                    showError('Please select at least one category');
                    return;
                }

                try {
                    const response = await fetch('/subscribe', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            email: currentEmailInput.value,
                            topics: selectedCategories
                        })
                    });

                    if (response.ok) {
                        showSuccess();
                        setTimeout(hideCategoryPopup, 2000);
                    } else {
                        throw new Error('Subscription failed');
                    }
                } catch (error) {
                    showError('Failed to subscribe. Please try again later.');
                }
            });

            // Close popup when clicking close button
            closeButton.addEventListener('click', hideCategoryPopup);

            // Helper functions
            function isValidEmail(email) {
                return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
            }

            function showSuccess() {
                thanksMessage.style.display = 'block';
                successMessages.forEach(msg => msg.style.display = 'block');
                errorMessages.forEach(msg => msg.style.display = 'none');
            }

            function showError(message) {
                errorMessages.forEach(msg => {
                    msg.querySelector('div').textContent = message;
                    msg.style.display = 'block';
                });
                successMessages.forEach(msg => msg.style.display = 'none');
            }
        </script>
</body>

</html>
